<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!-- jQuery library -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
<body>

    <h1>Hello World!</h1>
    <p>Welcome to my first Django project!</p>

    <p>Back to <a href="/testCardCheck">Members</a></p>

    <p>https://www.w3schools.com/django/django_master_template.php</p>
    <button type="button" class="btn btn-primary" id="VideoCapture">Video Plot</button>

    <!-- Image container to display the captured image -->
    <div id="imageContainer"></div>

    <!-- ปุ่ม test สำหรับ testCardCheck ใน views.py -->
    <button type="button" class="btn btn-primary" id="testButton">Test Card Check</button>

    <script>
        // เมื่อเอกสาร HTML โหลดเสร็จ
        $(document).ready(function() {
            // เมื่อปุ่ม VideoCapture ถูกคลิก
            $("#VideoCapture").click(function() {
                // ทำ AJAX request ไปยัง URL /VideoCapture/
                $.ajax({
                    url: "/VideoCapture/",
                    type: "GET",
                    dataType: "json",  // Specify that you expect a JSON response
                    success: function(response) {
                        console.log(response);
                        // Access the base64 string from the JSON response
                        var frameBase64 = response.frame_base64;

                        // Create an image element and set its source to the base64 string
                        var imgElement = $("<img>");
                        imgElement.attr("src", "data:image/jpeg;base64," + frameBase64);

                        // Append the image element to the image container
                        $("#imageContainer").empty().append(imgElement);
                    },
                    error: function(error) {
                        console.log("Error:", error);
                    }
                });
            });

            // เมื่อปุ่ม testButton ถูกคลิก
            $("#testButton").click(function() {
                // ทำ AJAX request ไปยัง URL /testCardCheck/
                $.ajax({
                    url: "/testCardCheck/",
                    type: "GET",
                    success: function(response) {
                        // แสดงข้อความที่ได้รับจาก server
                        alert(response);
                    },
                    error: function(error) {
                        console.log("Error:", error);
                    }
                });
            });
        });
    </script>
</body>
</html>
